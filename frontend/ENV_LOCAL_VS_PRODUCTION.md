# Local vs Production Environment Variables

This guide explains the differences between local development and production environment configurations.

## Overview

Your app uses **two types** of environment variables:
1. **Frontend variables** (`VITE_*`) - Set in `.env.local` (dev) or Vercel Dashboard (prod)
2. **Backend variables** - Set in Convex Dashboard (same for both environments, but different values)

---

## Frontend Variables (`VITE_*`)

These variables are read by your React/Vite frontend application.

### Where They're Set

| Environment | Location |
|------------|----------|
| **Local Development** | `frontend/.env.local` file |
| **Production** | Vercel Dashboard → Settings → Environment Variables |

### Required Variables

#### Convex URLs (MUST be different)

**Local Development:**
```bash
VITE_CONVEX_URL=https://usable-avocet-679.convex.cloud
VITE_CONVEX_SITE_URL=https://usable-avocet-679.convex.site
```
- These point to your **dev deployment**
- Generated automatically when you run `npx convex dev`
- Stored in `.env.local`

**Production:**
```bash
VITE_CONVEX_URL=https://prod-xxx.convex.cloud
VITE_CONVEX_SITE_URL=https://prod-xxx.convex.site
```
- These point to your **production deployment**
- Created when you run `npx convex deploy`
- Set in Vercel Dashboard

#### Cloudinary & AI Keys (Can be same or different)

**Local Development:**
```bash
VITE_CLOUDINARY_CLOUD_NAME=media-manager
VITE_CLOUDINARY_API_KEY=your_api_key
VITE_CLOUDINARY_UPLOAD_PRESET=ml_default
VITE_GEMINI_API_KEY=your_gemini_key
```

**Production:**
- **Option A:** Use the same values (simpler, good for small projects)
- **Option B:** Use separate production account/keys (more secure, recommended for larger projects)

---

## Backend Variables (Convex Dashboard)

These variables are used by your Convex backend functions.

### Where They're Set

**Both environments:** [Convex Dashboard](https://dashboard.convex.dev) → Settings → Environment Variables

### Required Variable

#### SITE_URL (MUST be different)

**Local Development:**
```
SITE_URL=http://localhost:5173
```
- Allows CORS requests from your local dev server
- Used by Better Auth for authentication

**Production:**
```
SITE_URL=https://your-app.vercel.app
```
- Allows CORS requests from your Vercel deployment
- Must match your actual Vercel URL
- Used by Better Auth for authentication

### Optional Variable

#### GEMINI_API_KEY (server-side)

- Can be the same key for both environments
- Or use separate keys for better security
- Only needed if using AI features in Convex functions

---

## Quick Comparison Table

| Variable | Local Dev | Production | Must Be Different? |
|----------|-----------|------------|-------------------|
| `VITE_CONVEX_URL` | `.env.local` | Vercel Dashboard | ✅ **Yes** |
| `VITE_CONVEX_SITE_URL` | `.env.local` | Vercel Dashboard | ✅ **Yes** |
| `VITE_CLOUDINARY_*` | `.env.local` | Vercel Dashboard | ⚠️ Optional |
| `VITE_GEMINI_API_KEY` | `.env.local` | Vercel Dashboard | ⚠️ Optional |
| `SITE_URL` | Convex Dashboard | Convex Dashboard | ✅ **Yes** |
| `GEMINI_API_KEY` | Convex Dashboard | Convex Dashboard | ⚠️ Optional |

---

## Summary

### What MUST Be Different

1. **Convex URLs** (`VITE_CONVEX_URL` and `VITE_CONVEX_SITE_URL`)
   - Local: Points to dev deployment
   - Production: Points to production deployment

2. **SITE_URL** (in Convex Dashboard)
   - Local: `http://localhost:5173`
   - Production: Your Vercel URL (e.g., `https://your-app.vercel.app`)

### What CAN Be the Same

- Cloudinary credentials (`VITE_CLOUDINARY_*`)
- Gemini API keys (`VITE_GEMINI_API_KEY` and `GEMINI_API_KEY`)

---

## Common Setup Patterns

### Pattern 1: Same Credentials (Simpler)
- Use the same Cloudinary account for dev and prod
- Use the same Gemini API key for both
- **Pros:** Easier to manage
- **Cons:** Less secure, dev usage counts against production quotas

### Pattern 2: Separate Credentials (Recommended)
- Separate Cloudinary account for production
- Separate API keys for production
- **Pros:** Better security, isolated usage tracking
- **Cons:** More setup, more accounts to manage

---

## Quick Checklist

### Local Development Setup
- [ ] `.env.local` has dev Convex URLs (auto-generated by `npx convex dev`)
- [ ] `.env.local` has Cloudinary credentials
- [ ] Convex Dashboard has `SITE_URL=http://localhost:5173`

### Production Setup
- [ ] Created production Convex deployment (`npx convex deploy`)
- [ ] Vercel Dashboard has production Convex URLs
- [ ] Vercel Dashboard has Cloudinary credentials
- [ ] Convex Dashboard has `SITE_URL=https://your-vercel-app.vercel.app`

---

## Need Help?

See the full setup guide: [ENV_SETUP.md](./ENV_SETUP.md)
